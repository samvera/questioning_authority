# Use this file to reference specific commits of gems.


group :development do
  # Rails < 6.1 are not compatible with psych 4, although doesn't know it.
  # Local apps using old Rails will have to lock locally.  Latest versions
  # of Rails 6.1+ has been updated to work with psych 4.
  # See also:
  #
  # https://stackoverflow.com/questions/71191685/visit-psych-nodes-alias-unknown-alias-default-psychbadalias/71192990#71192990
  #
  if ENV['RAILS_VERSION'] && Gem::Version.new(ENV['RAILS_VERSION']) < Gem::Version.new("6.1")
    gem 'psych', '< 4'

    # Some versions of linkeddata dependency depend on yaml-ld gem... yaml-ld 0.0.1
    # has a dependency on psych 4.x specifically, conflicting with above, bundler
    # seems to be having trouble resolving to yaml-ld 0.0.2 on it's own.
    # We don't actually depend on yaml-ld at all ourselves, just trying
    # to help bundler resolve a tree that works.
    #
    # https://github.com/ruby-rdf/linkeddata/issues/16#issuecomment-1239912981
    gem 'yaml-ld', ">= 0.0.2"
  end

  if ENV['RAILS_VERSION'] =~ /^6\.1\./ && ENV['RUBY_VERSION'] =~ /^3\.1\./
    # opt into mail 2.8.0.rc1 so we get extra dependencies
    # Once mail 2.8.0 final is released this will not be required.
    # https://github.com/mikel/mail/pull/1472
    gem "mail", ">= 2.8.0.rc1"
    # See https://stackoverflow.com/questions/70500220/rails-7-ruby-3-1-loaderror-cannot-load-such-file-net-smtp
    gem 'net-smtp', require: false
  end
end
